<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game with Animated Food</title>
    <style>
         body {
            background:  #d1d1d1;
        }
        canvas {
            display: block;
            margin: 0 auto;
            background-color: #000;
        }
        .controls, .difficulty {
            display: flex;
            justify-content: center;
            margin-top: 5px;
        }
        .control-btn {
            width: 70px;
            height: 70px;
            margin: 5px;
            background-color: #444;
            color: white;
            font-size: 18px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            user-select: none;
        }
        .control-btn:active {
            background-color: #666;
        }
        .control-grid {
            display: grid;
            grid-template-rows: repeat(3, 60px);
            grid-template-columns: repeat(3, 60px);
            gap: 5px;
            justify-content: center;
        }
        .control-grid button {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .empty-cell {
            background: none;
            pointer-events: none;
        }
        select {
            padding: 10px;
            font-size: 16px;
            border-radius: 5px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="400" height="400"></canvas>

     <!-- Difficulty Selector -->
     <div class="difficulty">
        <select id="difficulty">
            <option value="easy">Easy</option>
            <option value="medium" selected>Medium</option>
            <option value="hard">Hard</option>
        </select>
    </div>

    <!-- On-Screen Controls -->
    <div class="controls">
        <div class="control-grid">
            <button class="control-btn empty-cell"></button>
            <button class="control-btn" id="btnUp">↑</button>
            <button class="control-btn empty-cell"></button>
            <button class="control-btn" id="btnLeft">←</button>
            <button class="control-btn empty-cell"></button>
            <button class="control-btn" id="btnRight">→</button>
            <button class="control-btn empty-cell"></button>
            <button class="control-btn" id="btnDown">↓</button>
            <button class="control-btn empty-cell"></button>
        </div>
        <button onclick="goBack()" style="height: 60px; width: 70px; margin-bottom: 30px; border-radius: 20px;">Back</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Game settings
        const gridSize = 20;
        const canvasSize = canvas.width / gridSize;

        // Snake and food
        let snake = [{ x: 10, y: 10 }];
        let direction = { x: 0, y: 0 }; // No movement initially
        let food = { 
            x: Math.floor(Math.random() * canvasSize), 
            y: Math.floor(Math.random() * canvasSize),
            scale: 1, // Initial scale for the food
            growing: true // Flag to check if food is growing or shrinking
        };
        let gameSpeed = 150;
        let gameRunning = false; // Initially paused
        let gameInterval; // To store the interval ID

        // Draw a rectangle
        function drawRect(x, y, color) {
            ctx.fillStyle = color;
            ctx.fillRect(x * gridSize, y * gridSize, gridSize - 1, gridSize - 1);
        }

        // Draw the snake's head with eyes and a nose
        function drawSnakeHead(x, y) {
            drawRect(x, y, 'lime');

            // Add eyes
            ctx.fillStyle = 'black';
            ctx.beginPath();
            ctx.arc((x * gridSize) + 5, (y * gridSize) + 5, 2, 0, Math.PI * 2); // Left eye
            ctx.arc((x * gridSize) + gridSize - 5, (y * gridSize) + 5, 2, 0, Math.PI * 2); // Right eye
            ctx.fill();

            // Add nose
            ctx.fillStyle = 'red';
            ctx.beginPath();
            ctx.arc((x * gridSize) + gridSize / 2, (y * gridSize) + gridSize - 5, 3, 0, Math.PI * 2); // Nose
            ctx.fill();
        }

        // Draw game elements
        function drawGame() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw snake
            snake.forEach((segment, index) => {
                if (index === 0) {
                    drawSnakeHead(segment.x, segment.y); // Draw the head with eyes and nose
                } else {
                    drawRect(segment.x, segment.y, 'lime'); // Draw the rest of the body
                }
            });

            // Draw food with animation
            drawFoodWithAnimation();
        }

        // Draw food with animation (scaling effect)
        function drawFoodWithAnimation() {
            ctx.save(); // Save current state

            // Apply scale transformation for animation
            ctx.translate((food.x + 0.5) * gridSize, (food.y + 0.5) * gridSize); // Move the origin to the center of food
            ctx.scale(food.scale, food.scale); // Apply the scaling
            ctx.translate(-(food.x + 0.5) * gridSize, -(food.y + 0.5) * gridSize); // Revert origin

            // Draw the food (red square)
            drawRect(food.x, food.y, 'red');

            ctx.restore(); // Restore to previous state

            // Animate the food scale (pulse effect)
            if (food.growing) {
                food.scale += 0.05; // Grow the food
                if (food.scale >= 1.5) {
                    food.growing = false; // Start shrinking after reaching max size
                }
            } else {
                food.scale -= 0.05; // Shrink the food
                if (food.scale <= 1) {
                    food.growing = true; // Start growing again
                }
            }
        }

        // Update game state
        function updateGame() {
            if (!gameRunning) return;

            // Update snake position
            const head = { x: snake[0].x + direction.x, y: snake[0].y + direction.y };

            // Check collisions with walls
            if (head.x < 0 || head.y < 0 || head.x >= canvasSize || head.y >= canvasSize) {
                gameOver();
                return;
            }

            // Check collisions with itself
            if (snake.some(segment => segment.x === head.x && segment.y === head.y)) {
                gameOver();
                return;
            }

            // Check if food is eaten
            if (head.x === food.x && head.y === food.y) {
                snake.push({}); // Add new segment
                food = { 
                    x: Math.floor(Math.random() * canvasSize), 
                    y: Math.floor(Math.random() * canvasSize),
                    scale: 1, 
                    growing: true 
                }; // Respawn food with animation reset
            } else {
                snake.pop();
            }

            snake.unshift(head); // Add new head

            drawGame();
        }

        // Handle game over
        function gameOver() {
            gameRunning = false;
            clearInterval(gameInterval);
            alert('Game Over! Press OK to restart.');
            window.location.reload();
        }

        // Start the game if a valid button is clicked
        function startGame(newDirection) {
            if (!gameRunning) {
                gameRunning = true; // Start the game
                setDifficulty(); // Set speed based on difficulty
            }
            changeDirection(newDirection);
        }

        // Change direction of the snake
        function changeDirection(newDirection) {
            if (newDirection === 'up' && direction.y === 0) direction = { x: 0, y: -1 };
            else if (newDirection === 'down' && direction.y === 0) direction = { x: 0, y: 1 };
            else if (newDirection === 'left' && direction.x === 0) direction = { x: -1, y: 0 };
            else if (newDirection === 'right' && direction.x === 0) direction = { x: 1, y: 0 };
        }

        // Set difficulty based on user selection
        function setDifficulty() {
            const difficulty = document.getElementById('difficulty').value;
            if (difficulty === 'easy') gameSpeed = 200;
            else if (difficulty === 'medium') gameSpeed = 150;
            else if (difficulty === 'hard') gameSpeed = 100;

            clearInterval(gameInterval);
            gameInterval = setInterval(updateGame, gameSpeed);
        }

        // Attach event listeners to buttons
        document.getElementById('btnUp').addEventListener('click', () => startGame('up'));
        document.getElementById('btnDown').addEventListener('click', () => startGame('down'));
        document.getElementById('btnLeft').addEventListener('click', () => startGame('left'));
        document.getElementById('btnRight').addEventListener('click', () => startGame('right'));

        // Keyboard control
        document.addEventListener('keydown', (event) => {
            if (event.key === 'ArrowUp') startGame('up');
            else if (event.key === 'ArrowDown') startGame('down');
            else if (event.key === 'ArrowLeft') startGame('left');
            else if (event.key === 'ArrowRight') startGame('right');
        });

        drawGame(); // Initial draw

        // back Button
function goBack() {
    if (window.history.length > 1) {
        window.history.back();
    } else {
        window.location.href = "defaultPage.html"; // Redirect to a default page
    }
}

    </script>
</body>
</html>
